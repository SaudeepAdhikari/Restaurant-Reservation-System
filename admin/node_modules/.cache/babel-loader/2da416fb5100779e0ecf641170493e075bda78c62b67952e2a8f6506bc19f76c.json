{"ast":null,"code":"import React,{useEffect,useState}from'react';import{authFetch}from'../utils/auth';import'../styles/Profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EditModal(_ref){let{initial,onClose,onSaved}=_ref;const[name,setName]=useState(initial.name||'');const[email,setEmail]=useState(initial.email||'');const[password,setPassword]=useState('');const[saving,setSaving]=useState(false);const[err,setErr]=useState(null);async function save(){setSaving(true);setErr(null);try{const updated=await authFetch('/api/admin/auth/me',{method:'PUT',body:JSON.stringify({name,email,password:password||undefined})});onSaved(updated);onClose();}catch(e){setErr(e.message||String(e));}finally{setSaving(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Profile\"}),err&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:err}),/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"New password (leave blank to keep)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,disabled:saving,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:save,disabled:saving,children:saving?'Saving...':'Save'})]})]})});}function Profile(){const[profile,setProfile]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showEdit,setShowEdit]=useState(false);useEffect(()=>{let mounted=true;authFetch('/api/admin/auth/me').then(p=>{if(mounted)setProfile(p);}).catch(err=>{if(mounted)setError(err.message||String(err));}).finally(()=>{if(mounted)setLoading(false);});return()=>{mounted=false;};},[]);if(loading)return/*#__PURE__*/_jsxs(\"div\",{className:\"settings-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"settings-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"settings-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-row\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:profile.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-row\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:profile.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-row\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Member since:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:new Date(profile.createdAt).toLocaleString()})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowEdit(true),children:\"Edit\"})})]}),showEdit&&/*#__PURE__*/_jsx(EditModal,{initial:profile,onClose:()=>setShowEdit(false),onSaved:u=>setProfile(u)})]});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","authFetch","jsx","_jsx","jsxs","_jsxs","EditModal","_ref","initial","onClose","onSaved","name","setName","email","setEmail","password","setPassword","saving","setSaving","err","setErr","save","updated","method","body","JSON","stringify","undefined","e","message","String","className","children","value","onChange","target","type","onClick","disabled","Profile","profile","setProfile","loading","setLoading","error","setError","showEdit","setShowEdit","mounted","then","p","catch","finally","Date","createdAt","toLocaleString","style","marginTop","u"],"sources":["E:/Resturant/admin/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { authFetch } from '../utils/auth';\r\nimport '../styles/Profile.css';\r\n\r\nfunction EditModal({ initial, onClose, onSaved }) {\r\n  const [name, setName] = useState(initial.name || '');\r\n  const [email, setEmail] = useState(initial.email || '');\r\n  const [password, setPassword] = useState('');\r\n  const [saving, setSaving] = useState(false);\r\n  const [err, setErr] = useState(null);\r\n\r\n  async function save() {\r\n    setSaving(true);\r\n    setErr(null);\r\n    try {\r\n      const updated = await authFetch('/api/admin/auth/me', {\r\n        method: 'PUT',\r\n        body: JSON.stringify({ name, email, password: password || undefined })\r\n      });\r\n      onSaved(updated);\r\n      onClose();\r\n    } catch (e) {\r\n      setErr(e.message || String(e));\r\n    } finally { setSaving(false); }\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal\">\r\n        <h3>Edit Profile</h3>\r\n        {err && <div className=\"error\">{err}</div>}\r\n        <label>Name</label>\r\n        <input value={name} onChange={e => setName(e.target.value)} />\r\n        <label>Email</label>\r\n        <input value={email} onChange={e => setEmail(e.target.value)} />\r\n        <label>New password (leave blank to keep)</label>\r\n        <input type=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\r\n        <div className=\"modal-actions\">\r\n          <button onClick={onClose} disabled={saving}>Cancel</button>\r\n          <button onClick={save} disabled={saving}>{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Profile() {\r\n  const [profile, setProfile] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showEdit, setShowEdit] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    authFetch('/api/admin/auth/me')\r\n      .then(p => { if (mounted) setProfile(p); })\r\n      .catch(err => { if (mounted) setError(err.message || String(err)); })\r\n      .finally(() => { if (mounted) setLoading(false); });\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  if (loading) return <div className=\"settings-page\"><h2>Profile</h2><p>Loading...</p></div>;\r\n  if (error) return <div className=\"settings-page\"><h2>Profile</h2><p className=\"error\">{error}</p></div>;\r\n\r\n  return (\r\n    <div className=\"settings-page\">\r\n      <h2>Profile</h2>\r\n      <div className=\"profile-card\">\r\n        <div className=\"profile-row\"><strong>Name:</strong> <span>{profile.name}</span></div>\r\n        <div className=\"profile-row\"><strong>Email:</strong> <span>{profile.email}</span></div>\r\n        <div className=\"profile-row\"><strong>Member since:</strong> <span>{new Date(profile.createdAt).toLocaleString()}</span></div>\r\n        <div style={{marginTop:12}}>\r\n          <button onClick={() => setShowEdit(true)}>Edit</button>\r\n        </div>\r\n      </div>\r\n      {showEdit && <EditModal initial={profile} onClose={() => setShowEdit(false)} onSaved={(u) => setProfile(u)} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,eAAe,CACzC,MAAO,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/B,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAgC,IAA/B,CAAEC,OAAO,CAAEC,OAAO,CAAEC,OAAQ,CAAC,CAAAH,IAAA,CAC9C,KAAM,CAACI,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAACQ,OAAO,CAACG,IAAI,EAAI,EAAE,CAAC,CACpD,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAACQ,OAAO,CAACK,KAAK,EAAI,EAAE,CAAC,CACvD,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACiB,MAAM,CAAEC,SAAS,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACmB,GAAG,CAAEC,MAAM,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAEpC,cAAe,CAAAqB,IAAIA,CAAA,CAAG,CACpBH,SAAS,CAAC,IAAI,CAAC,CACfE,MAAM,CAAC,IAAI,CAAC,CACZ,GAAI,CACF,KAAM,CAAAE,OAAO,CAAG,KAAM,CAAArB,SAAS,CAAC,oBAAoB,CAAE,CACpDsB,MAAM,CAAE,KAAK,CACbC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEf,IAAI,CAAEE,KAAK,CAAEE,QAAQ,CAAEA,QAAQ,EAAIY,SAAU,CAAC,CACvE,CAAC,CAAC,CACFjB,OAAO,CAACY,OAAO,CAAC,CAChBb,OAAO,CAAC,CAAC,CACX,CAAE,MAAOmB,CAAC,CAAE,CACVR,MAAM,CAACQ,CAAC,CAACC,OAAO,EAAIC,MAAM,CAACF,CAAC,CAAC,CAAC,CAChC,CAAC,OAAS,CAAEV,SAAS,CAAC,KAAK,CAAC,CAAE,CAChC,CAEA,mBACEf,IAAA,QAAK4B,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B3B,KAAA,QAAK0B,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpB7B,IAAA,OAAA6B,QAAA,CAAI,cAAY,CAAI,CAAC,CACpBb,GAAG,eAAIhB,IAAA,QAAK4B,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEb,GAAG,CAAM,CAAC,cAC1ChB,IAAA,UAAA6B,QAAA,CAAO,MAAI,CAAO,CAAC,cACnB7B,IAAA,UAAO8B,KAAK,CAAEtB,IAAK,CAACuB,QAAQ,CAAEN,CAAC,EAAIhB,OAAO,CAACgB,CAAC,CAACO,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cAC9D9B,IAAA,UAAA6B,QAAA,CAAO,OAAK,CAAO,CAAC,cACpB7B,IAAA,UAAO8B,KAAK,CAAEpB,KAAM,CAACqB,QAAQ,CAAEN,CAAC,EAAId,QAAQ,CAACc,CAAC,CAACO,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cAChE9B,IAAA,UAAA6B,QAAA,CAAO,oCAAkC,CAAO,CAAC,cACjD7B,IAAA,UAAOiC,IAAI,CAAC,UAAU,CAACH,KAAK,CAAElB,QAAS,CAACmB,QAAQ,CAAEN,CAAC,EAAIZ,WAAW,CAACY,CAAC,CAACO,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cACtF5B,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B7B,IAAA,WAAQkC,OAAO,CAAE5B,OAAQ,CAAC6B,QAAQ,CAAErB,MAAO,CAAAe,QAAA,CAAC,QAAM,CAAQ,CAAC,cAC3D7B,IAAA,WAAQkC,OAAO,CAAEhB,IAAK,CAACiB,QAAQ,CAAErB,MAAO,CAAAe,QAAA,CAAEf,MAAM,CAAG,WAAW,CAAG,MAAM,CAAS,CAAC,EAC9E,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA,QAAS,CAAAsB,OAAOA,CAAA,CAAG,CACjB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGzC,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC0C,OAAO,CAAEC,UAAU,CAAC,CAAG3C,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC4C,KAAK,CAAEC,QAAQ,CAAC,CAAG7C,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC8C,QAAQ,CAAEC,WAAW,CAAC,CAAG/C,QAAQ,CAAC,KAAK,CAAC,CAE/CD,SAAS,CAAC,IAAM,CACd,GAAI,CAAAiD,OAAO,CAAG,IAAI,CAClB/C,SAAS,CAAC,oBAAoB,CAAC,CAC5BgD,IAAI,CAACC,CAAC,EAAI,CAAE,GAAIF,OAAO,CAAEP,UAAU,CAACS,CAAC,CAAC,CAAE,CAAC,CAAC,CAC1CC,KAAK,CAAChC,GAAG,EAAI,CAAE,GAAI6B,OAAO,CAAEH,QAAQ,CAAC1B,GAAG,CAACU,OAAO,EAAIC,MAAM,CAACX,GAAG,CAAC,CAAC,CAAE,CAAC,CAAC,CACpEiC,OAAO,CAAC,IAAM,CAAE,GAAIJ,OAAO,CAAEL,UAAU,CAAC,KAAK,CAAC,CAAE,CAAC,CAAC,CACrD,MAAO,IAAM,CAAEK,OAAO,CAAG,KAAK,CAAE,CAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIN,OAAO,CAAE,mBAAOrC,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAAC7B,IAAA,OAAA6B,QAAA,CAAI,SAAO,CAAI,CAAC,cAAA7B,IAAA,MAAA6B,QAAA,CAAG,YAAU,CAAG,CAAC,EAAK,CAAC,CAC1F,GAAIY,KAAK,CAAE,mBAAOvC,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAAC7B,IAAA,OAAA6B,QAAA,CAAI,SAAO,CAAI,CAAC,cAAA7B,IAAA,MAAG4B,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEY,KAAK,CAAI,CAAC,EAAK,CAAC,CAEvG,mBACEvC,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B7B,IAAA,OAAA6B,QAAA,CAAI,SAAO,CAAI,CAAC,cAChB3B,KAAA,QAAK0B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B3B,KAAA,QAAK0B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAAC7B,IAAA,WAAA6B,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,cAAA7B,IAAA,SAAA6B,QAAA,CAAOQ,OAAO,CAAC7B,IAAI,CAAO,CAAC,EAAK,CAAC,cACrFN,KAAA,QAAK0B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAAC7B,IAAA,WAAA6B,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,cAAA7B,IAAA,SAAA6B,QAAA,CAAOQ,OAAO,CAAC3B,KAAK,CAAO,CAAC,EAAK,CAAC,cACvFR,KAAA,QAAK0B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAAC7B,IAAA,WAAA6B,QAAA,CAAQ,eAAa,CAAQ,CAAC,IAAC,cAAA7B,IAAA,SAAA6B,QAAA,CAAO,GAAI,CAAAqB,IAAI,CAACb,OAAO,CAACc,SAAS,CAAC,CAACC,cAAc,CAAC,CAAC,CAAO,CAAC,EAAK,CAAC,cAC7HpD,IAAA,QAAKqD,KAAK,CAAE,CAACC,SAAS,CAAC,EAAE,CAAE,CAAAzB,QAAA,cACzB7B,IAAA,WAAQkC,OAAO,CAAEA,CAAA,GAAMU,WAAW,CAAC,IAAI,CAAE,CAAAf,QAAA,CAAC,MAAI,CAAQ,CAAC,CACpD,CAAC,EACH,CAAC,CACLc,QAAQ,eAAI3C,IAAA,CAACG,SAAS,EAACE,OAAO,CAAEgC,OAAQ,CAAC/B,OAAO,CAAEA,CAAA,GAAMsC,WAAW,CAAC,KAAK,CAAE,CAACrC,OAAO,CAAGgD,CAAC,EAAKjB,UAAU,CAACiB,CAAC,CAAE,CAAE,CAAC,EAC3G,CAAC,CAEV,CAEA,cAAe,CAAAnB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}