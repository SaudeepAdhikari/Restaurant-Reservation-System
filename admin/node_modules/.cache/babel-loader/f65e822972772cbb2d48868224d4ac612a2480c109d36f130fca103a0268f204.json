{"ast":null,"code":"const API_BASE = process.env.REACT_APP_API_URL || process.env.REACT_APP_API_BASE || 'http://localhost:5000';\nexport function getToken() {\n  return localStorage.getItem('admin_token');\n}\nexport function saveToken(token) {\n  localStorage.setItem('admin_token', token);\n}\nexport function removeToken() {\n  localStorage.removeItem('admin_token');\n}\nexport async function apiPost(path, body) {\n  const url = path.startsWith('http') ? path : `${API_BASE}${path}`;\n  const res = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  if (!res.ok) {\n    const err = await res.json().catch(() => ({\n      message: 'Network error'\n    }));\n    throw new Error(err.message || 'Request failed');\n  }\n  return res.json();\n}\nexport function authFetch(path, options = {}) {\n  const token = getToken();\n  const url = path.startsWith('http') ? path : `${API_BASE}${path}`;\n  return fetch(url, {\n    ...options,\n    headers: {\n      'Content-Type': 'application/json',\n      ...(options.headers || {}),\n      Authorization: token ? `Bearer ${token}` : undefined\n    }\n  }).then(async r => {\n    if (!r.ok) throw new Error((await r.json()).message || 'Request failed');\n    return r.json();\n  });\n}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","REACT_APP_API_BASE","getToken","localStorage","getItem","saveToken","token","setItem","removeToken","removeItem","apiPost","path","body","url","startsWith","res","fetch","method","headers","JSON","stringify","ok","err","json","catch","message","Error","authFetch","options","Authorization","undefined","then","r"],"sources":["E:/Resturant/admin/src/utils/auth.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_URL || process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n\r\nexport function getToken() {\r\n  return localStorage.getItem('admin_token');\r\n}\r\nexport function saveToken(token) {\r\n  localStorage.setItem('admin_token', token);\r\n}\r\nexport function removeToken() {\r\n  localStorage.removeItem('admin_token');\r\n}\r\n\r\nexport async function apiPost(path, body) {\r\n  const url = path.startsWith('http') ? path : `${API_BASE}${path}`;\r\n  const res = await fetch(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(body)\r\n  });\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(()=>({message: 'Network error'}));\r\n    throw new Error(err.message || 'Request failed');\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport function authFetch(path, options = {}) {\r\n  const token = getToken();\r\n  const url = path.startsWith('http') ? path : `${API_BASE}${path}`;\r\n  return fetch(url, {\r\n    ...options,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...(options.headers || {}),\r\n      Authorization: token ? `Bearer ${token}` : undefined\r\n    }\r\n  }).then(async r => {\r\n    if (!r.ok) throw new Error((await r.json()).message || 'Request failed');\r\n    return r.json();\r\n  });\r\n}\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAIF,OAAO,CAACC,GAAG,CAACE,kBAAkB,IAAI,uBAAuB;AAE3G,OAAO,SAASC,QAAQA,CAAA,EAAG;EACzB,OAAOC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;AAC5C;AACA,OAAO,SAASC,SAASA,CAACC,KAAK,EAAE;EAC/BH,YAAY,CAACI,OAAO,CAAC,aAAa,EAAED,KAAK,CAAC;AAC5C;AACA,OAAO,SAASE,WAAWA,CAAA,EAAG;EAC5BL,YAAY,CAACM,UAAU,CAAC,aAAa,CAAC;AACxC;AAEA,OAAO,eAAeC,OAAOA,CAACC,IAAI,EAAEC,IAAI,EAAE;EACxC,MAAMC,GAAG,GAAGF,IAAI,CAACG,UAAU,CAAC,MAAM,CAAC,GAAGH,IAAI,GAAG,GAAGd,QAAQ,GAAGc,IAAI,EAAE;EACjE,MAAMI,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAE;IAC3BI,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CN,IAAI,EAAEO,IAAI,CAACC,SAAS,CAACR,IAAI;EAC3B,CAAC,CAAC;EACF,IAAI,CAACG,GAAG,CAACM,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAK;MAACC,OAAO,EAAE;IAAe,CAAC,CAAC,CAAC;IACpE,MAAM,IAAIC,KAAK,CAACJ,GAAG,CAACG,OAAO,IAAI,gBAAgB,CAAC;EAClD;EACA,OAAOV,GAAG,CAACQ,IAAI,CAAC,CAAC;AACnB;AAEA,OAAO,SAASI,SAASA,CAAChB,IAAI,EAAEiB,OAAO,GAAG,CAAC,CAAC,EAAE;EAC5C,MAAMtB,KAAK,GAAGJ,QAAQ,CAAC,CAAC;EACxB,MAAMW,GAAG,GAAGF,IAAI,CAACG,UAAU,CAAC,MAAM,CAAC,GAAGH,IAAI,GAAG,GAAGd,QAAQ,GAAGc,IAAI,EAAE;EACjE,OAAOK,KAAK,CAACH,GAAG,EAAE;IAChB,GAAGe,OAAO;IACVV,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,IAAIU,OAAO,CAACV,OAAO,IAAI,CAAC,CAAC,CAAC;MAC1BW,aAAa,EAAEvB,KAAK,GAAG,UAAUA,KAAK,EAAE,GAAGwB;IAC7C;EACF,CAAC,CAAC,CAACC,IAAI,CAAC,MAAMC,CAAC,IAAI;IACjB,IAAI,CAACA,CAAC,CAACX,EAAE,EAAE,MAAM,IAAIK,KAAK,CAAC,CAAC,MAAMM,CAAC,CAACT,IAAI,CAAC,CAAC,EAAEE,OAAO,IAAI,gBAAgB,CAAC;IACxE,OAAOO,CAAC,CAACT,IAAI,CAAC,CAAC;EACjB,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}