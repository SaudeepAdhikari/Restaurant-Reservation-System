{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Routes,Route}from'react-router-dom';import Sidebar from'./components/Sidebar';import Topbar from'./components/Topbar';import Login from'./pages/Login';import Signup from'./pages/Signup';import{getToken}from'./utils/auth';import Dashboard from'./pages/Dashboard';import Owners from'./pages/Owners';import Restaurants from'./pages/Restaurants';import Customers from'./pages/Customers';import Bookings from'./pages/Bookings';import Analytics from'./pages/Analytics';import Settings from'./pages/Settings';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[token,setToken]=useState(getToken());useEffect(()=>{// verify token server-side on mount\nif(!token)return;(async()=>{try{const res=await fetch((process.env.REACT_APP_API_URL||process.env.REACT_APP_API_BASE||'http://localhost:5000')+'/api/admin/auth/verify',{headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok)throw new Error('invalid');}catch(err){// invalid token — clear and show login\nlocalStorage.removeItem('admin_token');setToken(null);}})();},[]);if(!token){return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onAuth:()=>setToken(getToken())})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(Signup,{onAuth:()=>setToken(getToken())})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Login,{onAuth:()=>setToken(getToken())})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-app-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-main-area\",children:[/*#__PURE__*/_jsx(Topbar,{}),/*#__PURE__*/_jsx(\"main\",{className:\"admin-main-content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/owners\",element:/*#__PURE__*/_jsx(Owners,{})}),/*#__PURE__*/_jsx(Route,{path:\"/restaurants\",element:/*#__PURE__*/_jsx(Restaurants,{})}),/*#__PURE__*/_jsx(Route,{path:\"/customers\",element:/*#__PURE__*/_jsx(Customers,{})}),/*#__PURE__*/_jsx(Route,{path:\"/bookings\",element:/*#__PURE__*/_jsx(Bookings,{})}),/*#__PURE__*/_jsx(Route,{path:\"/analytics\",element:/*#__PURE__*/_jsx(Analytics,{})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(Settings,{})})]})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Sidebar","Topbar","Login","Signup","getToken","Dashboard","Owners","Restaurants","Customers","Bookings","Analytics","Settings","jsx","_jsx","jsxs","_jsxs","App","token","setToken","res","fetch","process","env","REACT_APP_API_URL","REACT_APP_API_BASE","headers","Authorization","concat","ok","Error","err","localStorage","removeItem","children","path","element","onAuth","className"],"sources":["E:/Resturant/admin/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\nimport Sidebar from './components/Sidebar';\r\nimport Topbar from './components/Topbar';\r\nimport Login from './pages/Login';\r\nimport Signup from './pages/Signup';\r\nimport { getToken } from './utils/auth';\r\nimport Dashboard from './pages/Dashboard';\r\nimport Owners from './pages/Owners';\r\nimport Restaurants from './pages/Restaurants';\r\nimport Customers from './pages/Customers';\r\nimport Bookings from './pages/Bookings';\r\nimport Analytics from './pages/Analytics';\r\nimport Settings from './pages/Settings';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  const [token, setToken] = useState(getToken());\r\n  useEffect(() => {\r\n    // verify token server-side on mount\r\n    if (!token) return;\r\n    (async () => {\r\n      try {\r\n        const res = await fetch((process.env.REACT_APP_API_URL || process.env.REACT_APP_API_BASE || 'http://localhost:5000') + '/api/admin/auth/verify', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        if (!res.ok) throw new Error('invalid');\r\n      } catch (err) {\r\n        // invalid token — clear and show login\r\n        localStorage.removeItem('admin_token');\r\n        setToken(null);\r\n      }\r\n    })();\r\n  }, []);\r\n  if (!token) {\r\n    return (\r\n      <Routes>\r\n        <Route path=\"/login\" element={<Login onAuth={() => setToken(getToken())} />} />\r\n        <Route path=\"/signup\" element={<Signup onAuth={() => setToken(getToken())} />} />\r\n        <Route path=\"*\" element={<Login onAuth={() => setToken(getToken())} />} />\r\n      </Routes>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin-app-layout\">\r\n      <Sidebar />\r\n      <div className=\"admin-main-area\">\r\n        <Topbar />\r\n        <main className=\"admin-main-content\">\r\n          <Routes>\r\n            <Route path=\"/\" element={<Dashboard />} />\r\n            <Route path=\"/owners\" element={<Owners />} />\r\n            <Route path=\"/restaurants\" element={<Restaurants />} />\r\n            <Route path=\"/customers\" element={<Customers />} />\r\n            <Route path=\"/bookings\" element={<Bookings />} />\r\n            <Route path=\"/analytics\" element={<Analytics />} />\r\n            <Route path=\"/settings\" element={<Settings />} />\r\n          </Routes>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}