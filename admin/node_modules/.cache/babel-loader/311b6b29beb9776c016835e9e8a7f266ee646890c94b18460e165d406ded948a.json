{"ast":null,"code":"import _objectSpread from\"E:/Resturant/admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE=process.env.REACT_APP_API_URL||process.env.REACT_APP_API_BASE||'http://localhost:5000';export function getToken(){return localStorage.getItem('admin_token');}export function saveToken(token){localStorage.setItem('admin_token',token);}export function removeToken(){localStorage.removeItem('admin_token');}export async function apiPost(path,body){const url=path.startsWith('http')?path:\"\".concat(API_BASE).concat(path);const res=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});if(!res.ok){const err=await res.json().catch(()=>({message:'Network error'}));throw new Error(err.message||'Request failed');}return res.json();}export function authFetch(path){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=getToken();const url=path.startsWith('http')?path:\"\".concat(API_BASE).concat(path);return fetch(url,_objectSpread(_objectSpread({},options),{},{headers:_objectSpread(_objectSpread({'Content-Type':'application/json'},options.headers||{}),{},{Authorization:token?\"Bearer \".concat(token):undefined})})).then(async r=>{if(!r.ok)throw new Error((await r.json()).message||'Request failed');return r.json();});}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","REACT_APP_API_BASE","getToken","localStorage","getItem","saveToken","token","setItem","removeToken","removeItem","apiPost","path","body","url","startsWith","concat","res","fetch","method","headers","JSON","stringify","ok","err","json","catch","message","Error","authFetch","options","arguments","length","undefined","_objectSpread","Authorization","then","r"],"sources":["E:/Resturant/admin/src/utils/auth.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_URL || process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n\r\nexport function getToken() {\r\n  return localStorage.getItem('admin_token');\r\n}\r\nexport function saveToken(token) {\r\n  localStorage.setItem('admin_token', token);\r\n}\r\nexport function removeToken() {\r\n  localStorage.removeItem('admin_token');\r\n}\r\n\r\nexport async function apiPost(path, body) {\r\n  const url = path.startsWith('http') ? path : `${API_BASE}${path}`;\r\n  const res = await fetch(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(body)\r\n  });\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(()=>({message: 'Network error'}));\r\n    throw new Error(err.message || 'Request failed');\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport function authFetch(path, options = {}) {\r\n  const token = getToken();\r\n  const url = path.startsWith('http') ? path : `${API_BASE}${path}`;\r\n  return fetch(url, {\r\n    ...options,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...(options.headers || {}),\r\n      Authorization: token ? `Bearer ${token}` : undefined\r\n    }\r\n  }).then(async r => {\r\n    if (!r.ok) throw new Error((await r.json()).message || 'Request failed');\r\n    return r.json();\r\n  });\r\n}\r\n"],"mappings":"uGAAA,KAAM,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAIF,OAAO,CAACC,GAAG,CAACE,kBAAkB,EAAI,uBAAuB,CAE3G,MAAO,SAAS,CAAAC,QAAQA,CAAA,CAAG,CACzB,MAAO,CAAAC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAC5C,CACA,MAAO,SAAS,CAAAC,SAASA,CAACC,KAAK,CAAE,CAC/BH,YAAY,CAACI,OAAO,CAAC,aAAa,CAAED,KAAK,CAAC,CAC5C,CACA,MAAO,SAAS,CAAAE,WAAWA,CAAA,CAAG,CAC5BL,YAAY,CAACM,UAAU,CAAC,aAAa,CAAC,CACxC,CAEA,MAAO,eAAe,CAAAC,OAAOA,CAACC,IAAI,CAAEC,IAAI,CAAE,CACxC,KAAM,CAAAC,GAAG,CAAGF,IAAI,CAACG,UAAU,CAAC,MAAM,CAAC,CAAGH,IAAI,IAAAI,MAAA,CAAMlB,QAAQ,EAAAkB,MAAA,CAAGJ,IAAI,CAAE,CACjE,KAAM,CAAAK,GAAG,CAAG,KAAM,CAAAC,KAAK,CAACJ,GAAG,CAAE,CAC3BK,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CP,IAAI,CAAEQ,IAAI,CAACC,SAAS,CAACT,IAAI,CAC3B,CAAC,CAAC,CACF,GAAI,CAACI,GAAG,CAACM,EAAE,CAAE,CACX,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAK,CAACC,OAAO,CAAE,eAAe,CAAC,CAAC,CAAC,CACpE,KAAM,IAAI,CAAAC,KAAK,CAACJ,GAAG,CAACG,OAAO,EAAI,gBAAgB,CAAC,CAClD,CACA,MAAO,CAAAV,GAAG,CAACQ,IAAI,CAAC,CAAC,CACnB,CAEA,MAAO,SAAS,CAAAI,SAASA,CAACjB,IAAI,CAAgB,IAAd,CAAAkB,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CAC1C,KAAM,CAAAxB,KAAK,CAAGJ,QAAQ,CAAC,CAAC,CACxB,KAAM,CAAAW,GAAG,CAAGF,IAAI,CAACG,UAAU,CAAC,MAAM,CAAC,CAAGH,IAAI,IAAAI,MAAA,CAAMlB,QAAQ,EAAAkB,MAAA,CAAGJ,IAAI,CAAE,CACjE,MAAO,CAAAM,KAAK,CAACJ,GAAG,CAAAoB,aAAA,CAAAA,aAAA,IACXJ,OAAO,MACVV,OAAO,CAAAc,aAAA,CAAAA,aAAA,EACL,cAAc,CAAE,kBAAkB,EAC9BJ,OAAO,CAACV,OAAO,EAAI,CAAC,CAAC,MACzBe,aAAa,CAAE5B,KAAK,WAAAS,MAAA,CAAaT,KAAK,EAAK0B,SAAS,EACrD,EACF,CAAC,CAACG,IAAI,CAAC,KAAM,CAAAC,CAAC,EAAI,CACjB,GAAI,CAACA,CAAC,CAACd,EAAE,CAAE,KAAM,IAAI,CAAAK,KAAK,CAAC,CAAC,KAAM,CAAAS,CAAC,CAACZ,IAAI,CAAC,CAAC,EAAEE,OAAO,EAAI,gBAAgB,CAAC,CACxE,MAAO,CAAAU,CAAC,CAACZ,IAAI,CAAC,CAAC,CACjB,CAAC,CAAC,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}