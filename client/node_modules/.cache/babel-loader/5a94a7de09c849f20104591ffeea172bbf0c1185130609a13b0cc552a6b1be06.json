{"ast":null,"code":"import React,{useEffect,useState}from'react';import RestaurantCard from'../components/RestaurantCard';import styles from'../styles/modules/Restaurants.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Restaurants(){const[restaurants,setRestaurants]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{let mounted=true;setLoading(true);const base=process.env.REACT_APP_API_BASE||'http://localhost:5000';fetch(\"\".concat(base,\"/api/restaurants\")).then(res=>{if(!res.ok)throw new Error(\"HTTP \".concat(res.status));return res.json();}).then(data=>{console.debug('Restaurants response',data);if(!mounted)return;// support both direct array responses and objects like { value: [...] }\nif(Array.isArray(data)){setRestaurants(data);}else if(data&&Array.isArray(data.value)){setRestaurants(data.value);}else if(data&&Array.isArray(data.restaurants)){setRestaurants(data.restaurants);}else{// unknown shape: store empty and surface a helpful message\nsetRestaurants([]);setError('Unexpected response shape from server');}setError(null);}).catch(err=>{console.error('Failed to fetch restaurants',err);if(mounted)setError(err.message||String(err));}).finally(()=>{if(mounted)setLoading(false);});return()=>{mounted=false;};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.pageWrap,children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"main\",{className:styles.content,children:[/*#__PURE__*/_jsxs(\"header\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Restaurants\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.sub,children:\"Discover restaurants near you \\u2014 filter, explore, and book a table.\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:styles.gridSection,children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:styles.msg,children:\"Loading restaurants...\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:styles.msgError,children:[\"Failed to load restaurants: \",error]}),!loading&&!error&&restaurants.length===0&&/*#__PURE__*/_jsx(\"div\",{className:styles.msg,children:\"No restaurants found.\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'0.5rem',color:'#345'},children:!loading&&!error&&\"Showing \".concat(restaurants.length,\" restaurants\")}),/*#__PURE__*/_jsx(\"div\",{className:styles.grid,children:restaurants.map(r=>/*#__PURE__*/_jsx(RestaurantCard,{restaurant:r},r._id||r.id))})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","RestaurantCard","styles","jsx","_jsx","jsxs","_jsxs","Restaurants","restaurants","setRestaurants","loading","setLoading","error","setError","mounted","base","process","env","REACT_APP_API_BASE","fetch","concat","then","res","ok","Error","status","json","data","console","debug","Array","isArray","value","catch","err","message","String","finally","className","pageWrap","children","Navbar","content","header","sub","gridSection","msg","msgError","length","style","marginTop","color","grid","map","r","restaurant","_id","id"],"sources":["E:/Resturant/client/src/pages/Restaurants.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport RestaurantCard from '../components/RestaurantCard';\r\nimport styles from '../styles/modules/Restaurants.module.css';\r\n\r\nexport default function Restaurants() {\r\n  const [restaurants, setRestaurants] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    setLoading(true);\r\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n    fetch(`${base}/api/restaurants`)\r\n      .then(res => { if (!res.ok) throw new Error(`HTTP ${res.status}`); return res.json(); })\r\n      .then(data => {\r\n        console.debug('Restaurants response', data);\r\n        if (!mounted) return;\r\n        // support both direct array responses and objects like { value: [...] }\r\n        if (Array.isArray(data)) {\r\n          setRestaurants(data);\r\n        } else if (data && Array.isArray(data.value)) {\r\n          setRestaurants(data.value);\r\n        } else if (data && Array.isArray(data.restaurants)) {\r\n          setRestaurants(data.restaurants);\r\n        } else {\r\n          // unknown shape: store empty and surface a helpful message\r\n          setRestaurants([]);\r\n          setError('Unexpected response shape from server');\r\n        }\r\n        setError(null);\r\n      })\r\n      .catch(err => { console.error('Failed to fetch restaurants', err); if (mounted) setError(err.message || String(err)); })\r\n      .finally(() => { if (mounted) setLoading(false); });\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.pageWrap}>\r\n      <Navbar />\r\n      <main className={styles.content}>\r\n        <header className={styles.header}>\r\n          <h1>All Restaurants</h1>\r\n          <p className={styles.sub}>Discover restaurants near you â€” filter, explore, and book a table.</p>\r\n        </header>\r\n\r\n        <section className={styles.gridSection}>\r\n          {loading && <div className={styles.msg}>Loading restaurants...</div>}\r\n          {error && <div className={styles.msgError}>Failed to load restaurants: {error}</div>}\r\n          {!loading && !error && restaurants.length === 0 && <div className={styles.msg}>No restaurants found.</div>}\r\n\r\n          <div style={{marginTop: '0.5rem', color:'#345'}}>{!loading && !error && `Showing ${restaurants.length} restaurants`}</div>\r\n\r\n          <div className={styles.grid}>\r\n            {restaurants.map(r => (\r\n              <RestaurantCard key={r._id || r.id} restaurant={r} />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}