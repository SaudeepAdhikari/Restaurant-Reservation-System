{"ast":null,"code":"var _jsxFileName = \"E:\\\\Resturant\\\\client\\\\src\\\\components\\\\common\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProtectedRoute({\n  children\n}) {\n  _s();\n  const [checking, setChecking] = useState(true);\n  const [authed, setAuthed] = useState(false);\n  useEffect(() => {\n    let mounted = true;\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n    fetch(`${base}/api/customers/me`, {\n      credentials: 'include'\n    }).then(res => {\n      if (!mounted) return;\n      if (!res.ok) {\n        setAuthed(false);\n      } else {\n        setAuthed(true);\n      }\n    }).catch(() => {\n      if (mounted) setAuthed(false);\n    }).finally(() => {\n      if (mounted) setChecking(false);\n    });\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  if (checking) return null; // or a spinner\n  return authed ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 30\n  }, this);\n}\n_s(ProtectedRoute, \"6z725XzbMGDf+SHpn725rI0cKpE=\");\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","useEffect","useState","Navigate","jsxDEV","_jsxDEV","ProtectedRoute","children","_s","checking","setChecking","authed","setAuthed","mounted","base","process","env","REACT_APP_API_BASE","fetch","credentials","then","res","ok","catch","finally","to","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/Resturant/client/src/components/common/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nfunction ProtectedRoute({ children }) {\r\n  const [checking, setChecking] = useState(true);\r\n  const [authed, setAuthed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n    fetch(`${base}/api/customers/me`, { credentials: 'include' })\r\n      .then(res => {\r\n        if (!mounted) return;\r\n        if (!res.ok) {\r\n          setAuthed(false);\r\n        } else {\r\n          setAuthed(true);\r\n        }\r\n      })\r\n      .catch(() => { if (mounted) setAuthed(false); })\r\n      .finally(() => { if (mounted) setChecking(false); });\r\n\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  if (checking) return null; // or a spinner\r\n  return authed ? children : <Navigate to=\"/login\" />;\r\n}\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,QAAQ,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,SAASC,cAAcA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACpC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAE3CD,SAAS,CAAC,MAAM;IACd,IAAIY,OAAO,GAAG,IAAI;IAClB,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,uBAAuB;IACtEC,KAAK,CAAC,GAAGJ,IAAI,mBAAmB,EAAE;MAAEK,WAAW,EAAE;IAAU,CAAC,CAAC,CAC1DC,IAAI,CAACC,GAAG,IAAI;MACX,IAAI,CAACR,OAAO,EAAE;MACd,IAAI,CAACQ,GAAG,CAACC,EAAE,EAAE;QACXV,SAAS,CAAC,KAAK,CAAC;MAClB,CAAC,MAAM;QACLA,SAAS,CAAC,IAAI,CAAC;MACjB;IACF,CAAC,CAAC,CACDW,KAAK,CAAC,MAAM;MAAE,IAAIV,OAAO,EAAED,SAAS,CAAC,KAAK,CAAC;IAAE,CAAC,CAAC,CAC/CY,OAAO,CAAC,MAAM;MAAE,IAAIX,OAAO,EAAEH,WAAW,CAAC,KAAK,CAAC;IAAE,CAAC,CAAC;IAEtD,OAAO,MAAM;MAAEG,OAAO,GAAG,KAAK;IAAE,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIJ,QAAQ,EAAE,OAAO,IAAI,CAAC,CAAC;EAC3B,OAAOE,MAAM,GAAGJ,QAAQ,gBAAGF,OAAA,CAACF,QAAQ;IAACsB,EAAE,EAAC;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACrD;AAACrB,EAAA,CAxBQF,cAAc;AAAAwB,EAAA,GAAdxB,cAAc;AA0BvB,eAAeA,cAAc;AAAC,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}