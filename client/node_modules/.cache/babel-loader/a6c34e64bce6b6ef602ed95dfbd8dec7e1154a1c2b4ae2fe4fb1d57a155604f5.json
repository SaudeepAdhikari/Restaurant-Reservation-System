{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import styles from'../../styles/modules/Navbar.module.css';import HeaderDropdown from'./HeaderDropdown';import ConfirmModal from'./ConfirmModal';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Navbar(){const[scrolled,setScrolled]=useState(false);const[showCuisines,setShowCuisines]=useState(false);const[showUserMenu,setShowUserMenu]=useState(false);const userRef=useRef(null);const cuisinesRef=useRef(null);const navigate=useNavigate();useEffect(()=>{const onScroll=()=>setScrolled(window.scrollY>20);window.addEventListener('scroll',onScroll);return()=>window.removeEventListener('scroll',onScroll);},[]);// close dropdowns when clicking outside\nuseEffect(()=>{const onDocClick=e=>{if(userRef.current&&!userRef.current.contains(e.target)){setShowUserMenu(false);}if(cuisinesRef.current&&!cuisinesRef.current.contains(e.target)){setShowCuisines(false);}};document.addEventListener('click',onDocClick);return()=>document.removeEventListener('click',onDocClick);},[]);const cuisines=['Italian','Chinese','Indian','Mexican','Thai'];// convert to action items that navigate within the SPA\nconst cuisineItems=cuisines.map(c=>({label:c,action:()=>{setShowCuisines(false);navigate(\"/?cuisine=\".concat(encodeURIComponent(c)));}}));const[confirmOpen,setConfirmOpen]=useState(false);const userMenu=[{label:'Profile',action:()=>{setShowUserMenu(false);navigate('/profile');}},{label:'Logout',action:()=>{setShowUserMenu(false);setConfirmOpen(true);}}];const doLogout=()=>{const base=process.env.REACT_APP_API_BASE||'http://localhost:5000';fetch(\"\".concat(base,\"/api/customers/logout\"),{method:'POST',credentials:'include'}).finally(()=>{setConfirmOpen(false);navigate('/login');});};// derive user initials from server-side profile\nconst[initials,setInitials]=useState('U');useEffect(()=>{let mounted=true;const base=process.env.REACT_APP_API_BASE||'http://localhost:5000';fetch(\"\".concat(base,\"/api/customers/me\"),{credentials:'include'}).then(res=>res.ok?res.json():null).then(u=>{if(!mounted||!u)return;const name=u.name||'';const parts=name.trim().split(/\\s+/);const first=parts[0]?parts[0].charAt(0).toUpperCase():'';const last=parts.length>1?parts[parts.length-1].charAt(0).toUpperCase():'';setInitials(first+last||'U');}).catch(()=>{}).finally(()=>{mounted=false;});return()=>{mounted=false;};},[]);return/*#__PURE__*/_jsxs(\"nav\",{className:\"\".concat(styles.navbar,\" \").concat(scrolled?styles.scrolled:''),children:[/*#__PURE__*/_jsx(\"div\",{className:styles.logo,children:\"Your Restro\"}),/*#__PURE__*/_jsxs(\"ul\",{className:styles.navLinks,children:[/*#__PURE__*/_jsx(\"li\",{role:\"button\",tabIndex:0,onClick:()=>navigate('/dashboard'),children:\"Home\"}),/*#__PURE__*/_jsx(\"li\",{role:\"button\",tabIndex:0,onClick:()=>navigate('/restaurants'),children:\"Restaurants\"}),/*#__PURE__*/_jsx(\"li\",{role:\"button\",tabIndex:0,onClick:()=>navigate('/offers'),children:\"Offers\"}),/*#__PURE__*/_jsx(\"li\",{role:\"button\",tabIndex:0,onClick:()=>navigate('/booking/history'),children:\"Bookings\"}),/*#__PURE__*/_jsxs(\"li\",{ref:userRef,className:styles.avatarWrapper,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.avatarBtn,onClick:()=>setShowUserMenu(s=>!s),\"aria-haspopup\":\"true\",\"aria-expanded\":showUserMenu,\"aria-label\":\"User menu\",children:/*#__PURE__*/_jsx(\"div\",{className:styles.avatarInitials,\"aria-hidden\":\"true\",children:initials})}),/*#__PURE__*/_jsx(HeaderDropdown,{items:userMenu,visible:showUserMenu})]})]}),/*#__PURE__*/_jsx(\"button\",{className:styles.loginBtn,onClick:()=>navigate('/login'),children:\"Login\"}),/*#__PURE__*/_jsx(ConfirmModal,{show:confirmOpen,title:\"Logout\",message:\"Are you sure you want to logout?\",onConfirm:doLogout,onCancel:()=>setConfirmOpen(false)})]});}export default Navbar;","map":{"version":3,"names":["React","useEffect","useRef","useState","styles","HeaderDropdown","ConfirmModal","useNavigate","jsx","_jsx","jsxs","_jsxs","Navbar","scrolled","setScrolled","showCuisines","setShowCuisines","showUserMenu","setShowUserMenu","userRef","cuisinesRef","navigate","onScroll","window","scrollY","addEventListener","removeEventListener","onDocClick","e","current","contains","target","document","cuisines","cuisineItems","map","c","label","action","concat","encodeURIComponent","confirmOpen","setConfirmOpen","userMenu","doLogout","base","process","env","REACT_APP_API_BASE","fetch","method","credentials","finally","initials","setInitials","mounted","then","res","ok","json","u","name","parts","trim","split","first","charAt","toUpperCase","last","length","catch","className","navbar","children","logo","navLinks","role","tabIndex","onClick","ref","avatarWrapper","avatarBtn","s","avatarInitials","items","visible","loginBtn","show","title","message","onConfirm","onCancel"],"sources":["E:/Resturant/client/src/components/common/Navbar.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport styles from '../../styles/modules/Navbar.module.css';\r\nimport HeaderDropdown from './HeaderDropdown';\r\nimport ConfirmModal from './ConfirmModal';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Navbar() {\r\n  const [scrolled, setScrolled] = useState(false);\r\n  const [showCuisines, setShowCuisines] = useState(false);\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const userRef = useRef(null);\r\n  const cuisinesRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const onScroll = () => setScrolled(window.scrollY > 20);\r\n    window.addEventListener('scroll', onScroll);\r\n    return () => window.removeEventListener('scroll', onScroll);\r\n  }, []);\r\n\r\n  // close dropdowns when clicking outside\r\n  useEffect(() => {\r\n    const onDocClick = (e) => {\r\n      if (userRef.current && !userRef.current.contains(e.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n      if (cuisinesRef.current && !cuisinesRef.current.contains(e.target)) {\r\n        setShowCuisines(false);\r\n      }\r\n    };\r\n    document.addEventListener('click', onDocClick);\r\n    return () => document.removeEventListener('click', onDocClick);\r\n  }, []);\r\n\r\n  const cuisines = ['Italian', 'Chinese', 'Indian', 'Mexican', 'Thai'];\r\n  // convert to action items that navigate within the SPA\r\n  const cuisineItems = cuisines.map((c) => ({\r\n    label: c,\r\n    action: () => {\r\n      setShowCuisines(false);\r\n      navigate(`/?cuisine=${encodeURIComponent(c)}`);\r\n    },\r\n  }));\r\n\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n\r\n  const userMenu = [\r\n    { label: 'Profile', action: () => { setShowUserMenu(false); navigate('/profile'); } },\r\n    { label: 'Logout', action: () => { setShowUserMenu(false); setConfirmOpen(true); } },\r\n  ];\r\n\r\n  const doLogout = () => {\r\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n    fetch(`${base}/api/customers/logout`, { method: 'POST', credentials: 'include' })\r\n      .finally(() => {\r\n        setConfirmOpen(false);\r\n        navigate('/login');\r\n      });\r\n  };\r\n\r\n  // derive user initials from server-side profile\r\n  const [initials, setInitials] = useState('U');\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n    fetch(`${base}/api/customers/me`, { credentials: 'include' })\r\n      .then(res => res.ok ? res.json() : null)\r\n      .then(u => {\r\n        if (!mounted || !u) return;\r\n        const name = u.name || '';\r\n        const parts = name.trim().split(/\\s+/);\r\n        const first = parts[0] ? parts[0].charAt(0).toUpperCase() : '';\r\n        const last = parts.length > 1 ? parts[parts.length-1].charAt(0).toUpperCase() : '';\r\n        setInitials((first + last) || 'U');\r\n      }).catch(() => {}).finally(() => { mounted = false; });\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  return (\r\n    <nav className={`${styles.navbar} ${scrolled ? styles.scrolled : ''}`}>\r\n      <div className={styles.logo}>Your Restro</div>\r\n\r\n  <ul className={styles.navLinks}>\r\n  <li role=\"button\" tabIndex={0} onClick={() => navigate('/dashboard')}>Home</li>\r\n\r\n  <li role=\"button\" tabIndex={0} onClick={() => navigate('/restaurants')}>Restaurants</li>\r\n\r\n        <li role=\"button\" tabIndex={0} onClick={() => navigate('/offers')}>Offers</li>\r\n        <li role=\"button\" tabIndex={0} onClick={() => navigate('/booking/history')}>Bookings</li>\r\n\r\n        <li ref={userRef} className={styles.avatarWrapper}>\r\n          <button\r\n            className={styles.avatarBtn}\r\n            onClick={() => setShowUserMenu((s) => !s)}\r\n            aria-haspopup=\"true\"\r\n            aria-expanded={showUserMenu}\r\n            aria-label=\"User menu\"\r\n          >\r\n            <div className={styles.avatarInitials} aria-hidden=\"true\">{initials}</div>\r\n          </button>\r\n          <HeaderDropdown items={userMenu} visible={showUserMenu} />\r\n        </li>\r\n      </ul>\r\n\r\n      <button className={styles.loginBtn} onClick={() => navigate('/login')}>Login</button>\r\n  <ConfirmModal show={confirmOpen} title=\"Logout\" message=\"Are you sure you want to logout?\" onConfirm={doLogout} onCancel={() => setConfirmOpen(false)} />\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}