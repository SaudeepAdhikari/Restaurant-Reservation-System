{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import'./Offers.css';// Offers will be loaded from the backend (if available). No mocked data here.\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatRemaining(ms){if(ms<=0)return'00:00:00';const sec=Math.floor(ms/1000)%60;const min=Math.floor(ms/(1000*60))%60;const hr=Math.floor(ms/(1000*60*60));return[hr,min,sec].map(n=>String(n).padStart(2,'0')).join(':');}export default function Offers(){const[now,setNow]=useState(Date.now());const[offers,setOffers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const trackRef=useRef(null);useEffect(()=>{const t=setInterval(()=>setNow(Date.now()),1000);return()=>clearInterval(t);},[]);useEffect(()=>{let mounted=true;setLoading(true);const base=process.env.REACT_APP_API_BASE||'http://localhost:5000';fetch(\"\".concat(base,\"/api/offers\")).then(res=>{if(!res.ok)throw new Error(\"HTTP \".concat(res.status));return res.json();}).then(data=>{if(mounted)setOffers(Array.isArray(data)?data:[]);}).catch(err=>{console.debug('No offers endpoint or failed to load offers',err);if(mounted)setOffers([]);}).finally(()=>{if(mounted)setLoading(false);});return()=>{mounted=false;};},[]);const slide=function(){let dir=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;if(!trackRef.current)return;const w=trackRef.current.clientWidth;trackRef.current.scrollBy({left:Math.round(w*0.6)*dir,behavior:'smooth'});};return/*#__PURE__*/_jsxs(\"section\",{className:\"offers-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"offers-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Offers & Deals\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"offers-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>slide(-1),children:\"\\u2039\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>slide(1),children:\"\\u203A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"offers-track\",ref:trackRef,children:[loading&&/*#__PURE__*/_jsx(\"div\",{style:{padding:16},children:\"Loading offers...\"}),!loading&&offers.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{padding:16},children:\"No offers found.\"}),!loading&&offers.map(o=>/*#__PURE__*/_jsxs(\"div\",{className:\"offer-card \".concat(o.topDeal?'top':''),children:[o.topDeal&&/*#__PURE__*/_jsx(\"div\",{className:\"offer-glow\",children:\"Top Deal\"}),/*#__PURE__*/_jsx(\"img\",{src:o.image||'/assets/placeholder.jpg',alt:o.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"offer-body\",children:[/*#__PURE__*/_jsx(\"h3\",{children:o.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"offer-meta\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"offer-discount\",children:o.discount}),/*#__PURE__*/_jsx(\"div\",{className:\"offer-countdown\",children:formatRemaining((o.endsAt||0)-now)})]})]})]},o.id))]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","jsx","_jsx","jsxs","_jsxs","formatRemaining","ms","sec","Math","floor","min","hr","map","n","String","padStart","join","Offers","now","setNow","Date","offers","setOffers","loading","setLoading","error","setError","trackRef","t","setInterval","clearInterval","mounted","base","process","env","REACT_APP_API_BASE","fetch","concat","then","res","ok","Error","status","json","data","Array","isArray","catch","err","console","debug","finally","slide","dir","arguments","length","undefined","current","w","clientWidth","scrollBy","left","round","behavior","className","children","onClick","ref","style","padding","o","topDeal","src","image","alt","title","discount","endsAt","id"],"sources":["E:/Resturant/client/src/components/Offers.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport './Offers.css';\r\n\r\n// Offers will be loaded from the backend (if available). No mocked data here.\r\n\r\nfunction formatRemaining(ms) {\r\n  if (ms <= 0) return '00:00:00';\r\n  const sec = Math.floor(ms / 1000) % 60;\r\n  const min = Math.floor(ms / (1000 * 60)) % 60;\r\n  const hr = Math.floor(ms / (1000 * 60 * 60));\r\n  return [hr, min, sec].map(n => String(n).padStart(2,'0')).join(':');\r\n}\r\n\r\nexport default function Offers() {\r\n  const [now, setNow] = useState(Date.now());\r\n  const [offers, setOffers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const trackRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const t = setInterval(() => setNow(Date.now()), 1000);\r\n    return () => clearInterval(t);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    setLoading(true);\r\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n    fetch(`${base}/api/offers`)\r\n      .then(res => {\r\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n        return res.json();\r\n      })\r\n      .then(data => { if (mounted) setOffers(Array.isArray(data) ? data : []); })\r\n      .catch(err => { console.debug('No offers endpoint or failed to load offers', err); if (mounted) setOffers([]); })\r\n      .finally(() => { if (mounted) setLoading(false); });\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  const slide = (dir=1) => {\r\n    if (!trackRef.current) return;\r\n    const w = trackRef.current.clientWidth;\r\n    trackRef.current.scrollBy({ left: Math.round(w * 0.6) * dir, behavior: 'smooth' });\r\n  };\r\n\r\n  return (\r\n    <section className=\"offers-section\">\r\n      <div className=\"offers-header\">\r\n        <h2>Offers & Deals</h2>\r\n        <div className=\"offers-controls\">\r\n          <button onClick={() => slide(-1)}>‹</button>\r\n          <button onClick={() => slide(1)}>›</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"offers-track\" ref={trackRef}>\r\n        {loading && <div style={{padding:16}}>Loading offers...</div>}\r\n        {!loading && offers.length === 0 && <div style={{padding:16}}>No offers found.</div>}\r\n        {!loading && offers.map(o => (\r\n          <div key={o.id} className={`offer-card ${o.topDeal ? 'top' : ''}`}>\r\n            {o.topDeal && <div className=\"offer-glow\">Top Deal</div>}\r\n            <img src={o.image || '/assets/placeholder.jpg'} alt={o.title} />\r\n            <div className=\"offer-body\">\r\n              <h3>{o.title}</h3>\r\n              <div className=\"offer-meta\">\r\n                <div className=\"offer-discount\">{o.discount}</div>\r\n                <div className=\"offer-countdown\">{formatRemaining((o.endsAt || 0) - now)}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}