{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import styles from'../../styles/modules/Navbar.module.css';import HeaderDropdown from'./HeaderDropdown';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Navbar(){const[scrolled,setScrolled]=useState(false);const[showCuisines,setShowCuisines]=useState(false);const[showUserMenu,setShowUserMenu]=useState(false);const userRef=useRef(null);const cuisinesRef=useRef(null);const navigate=useNavigate();useEffect(()=>{const onScroll=()=>setScrolled(window.scrollY>20);window.addEventListener('scroll',onScroll);return()=>window.removeEventListener('scroll',onScroll);},[]);// close dropdowns when clicking outside\nuseEffect(()=>{const onDocClick=e=>{if(userRef.current&&!userRef.current.contains(e.target)){setShowUserMenu(false);}if(cuisinesRef.current&&!cuisinesRef.current.contains(e.target)){setShowCuisines(false);}};document.addEventListener('click',onDocClick);return()=>document.removeEventListener('click',onDocClick);},[]);const cuisines=['Italian','Chinese','Indian','Mexican','Thai'];// convert to action items that navigate within the SPA\nconst cuisineItems=cuisines.map(c=>({label:c,action:()=>{setShowCuisines(false);navigate(\"/?cuisine=\".concat(encodeURIComponent(c)));}}));const userMenu=[{label:'Profile',action:()=>{setShowUserMenu(false);navigate('/profile');}},{label:'Logout',action:()=>{setShowUserMenu(false);console.log('logout clicked');}}];// derive user initials from localStorage (fallback to 'U')\nconst[initials,setInitials]=useState('U');useEffect(()=>{try{const raw=localStorage.getItem('user');if(raw){const u=JSON.parse(raw);const name=u.name||u.fullName||u.username||'';if(name){const parts=name.trim().split(/\\s+/);const first=parts[0]?parts[0].charAt(0).toUpperCase():'';const last=parts.length>1?parts[parts.length-1].charAt(0).toUpperCase():'';setInitials(first+last||'U');return;}}}catch(e){// ignore\n}setInitials('U');},[]);return/*#__PURE__*/_jsxs(\"nav\",{className:\"\".concat(styles.navbar,\" \").concat(scrolled?styles.scrolled:''),children:[/*#__PURE__*/_jsx(\"div\",{className:styles.logo,children:\"Your Restro\"}),/*#__PURE__*/_jsxs(\"ul\",{className:styles.navLinks,children:[/*#__PURE__*/_jsx(\"li\",{role:\"button\",tabIndex:0,onClick:()=>navigate('/'),children:\"Home\"}),/*#__PURE__*/_jsx(\"li\",{role:\"button\",tabIndex:0,onClick:()=>navigate('/restaurants'),children:\"Restaurants\"}),/*#__PURE__*/_jsx(\"li\",{role:\"button\",tabIndex:0,onClick:()=>navigate('/offers'),children:\"Offers\"}),/*#__PURE__*/_jsx(\"li\",{role:\"button\",tabIndex:0,onClick:()=>navigate('/booking/history'),children:\"Bookings\"}),/*#__PURE__*/_jsxs(\"li\",{ref:userRef,className:styles.avatarWrapper,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.avatarBtn,onClick:()=>setShowUserMenu(s=>!s),\"aria-haspopup\":\"true\",\"aria-expanded\":showUserMenu,\"aria-label\":\"User menu\",children:/*#__PURE__*/_jsx(\"div\",{className:styles.avatarInitials,\"aria-hidden\":\"true\",children:initials})}),/*#__PURE__*/_jsx(HeaderDropdown,{items:userMenu,visible:showUserMenu})]})]}),/*#__PURE__*/_jsx(\"button\",{className:styles.loginBtn,onClick:()=>navigate('/login'),children:\"Login\"})]});}export default Navbar;","map":{"version":3,"names":["React","useEffect","useRef","useState","styles","HeaderDropdown","useNavigate","jsx","_jsx","jsxs","_jsxs","Navbar","scrolled","setScrolled","showCuisines","setShowCuisines","showUserMenu","setShowUserMenu","userRef","cuisinesRef","navigate","onScroll","window","scrollY","addEventListener","removeEventListener","onDocClick","e","current","contains","target","document","cuisines","cuisineItems","map","c","label","action","concat","encodeURIComponent","userMenu","console","log","initials","setInitials","raw","localStorage","getItem","u","JSON","parse","name","fullName","username","parts","trim","split","first","charAt","toUpperCase","last","length","className","navbar","children","logo","navLinks","role","tabIndex","onClick","ref","avatarWrapper","avatarBtn","s","avatarInitials","items","visible","loginBtn"],"sources":["E:/Resturant/client/src/components/common/Navbar.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport styles from '../../styles/modules/Navbar.module.css';\r\nimport HeaderDropdown from './HeaderDropdown';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Navbar() {\r\n  const [scrolled, setScrolled] = useState(false);\r\n  const [showCuisines, setShowCuisines] = useState(false);\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const userRef = useRef(null);\r\n  const cuisinesRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const onScroll = () => setScrolled(window.scrollY > 20);\r\n    window.addEventListener('scroll', onScroll);\r\n    return () => window.removeEventListener('scroll', onScroll);\r\n  }, []);\r\n\r\n  // close dropdowns when clicking outside\r\n  useEffect(() => {\r\n    const onDocClick = (e) => {\r\n      if (userRef.current && !userRef.current.contains(e.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n      if (cuisinesRef.current && !cuisinesRef.current.contains(e.target)) {\r\n        setShowCuisines(false);\r\n      }\r\n    };\r\n    document.addEventListener('click', onDocClick);\r\n    return () => document.removeEventListener('click', onDocClick);\r\n  }, []);\r\n\r\n  const cuisines = ['Italian', 'Chinese', 'Indian', 'Mexican', 'Thai'];\r\n  // convert to action items that navigate within the SPA\r\n  const cuisineItems = cuisines.map((c) => ({\r\n    label: c,\r\n    action: () => {\r\n      setShowCuisines(false);\r\n      navigate(`/?cuisine=${encodeURIComponent(c)}`);\r\n    },\r\n  }));\r\n\r\n  const userMenu = [\r\n    { label: 'Profile', action: () => { setShowUserMenu(false); navigate('/profile'); } },\r\n    { label: 'Logout', action: () => { setShowUserMenu(false); console.log('logout clicked'); } },\r\n  ];\r\n\r\n  // derive user initials from localStorage (fallback to 'U')\r\n  const [initials, setInitials] = useState('U');\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem('user');\r\n      if (raw) {\r\n        const u = JSON.parse(raw);\r\n        const name = u.name || u.fullName || u.username || '';\r\n        if (name) {\r\n          const parts = name.trim().split(/\\s+/);\r\n          const first = parts[0] ? parts[0].charAt(0).toUpperCase() : '';\r\n          const last = parts.length > 1 ? parts[parts.length-1].charAt(0).toUpperCase() : '';\r\n          setInitials((first + last) || 'U');\r\n          return;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n    setInitials('U');\r\n  }, []);\r\n\r\n  return (\r\n    <nav className={`${styles.navbar} ${scrolled ? styles.scrolled : ''}`}>\r\n      <div className={styles.logo}>Your Restro</div>\r\n\r\n      <ul className={styles.navLinks}>\r\n        <li role=\"button\" tabIndex={0} onClick={() => navigate('/')}>Home</li>\r\n\r\n  <li role=\"button\" tabIndex={0} onClick={() => navigate('/restaurants')}>Restaurants</li>\r\n\r\n        <li role=\"button\" tabIndex={0} onClick={() => navigate('/offers')}>Offers</li>\r\n        <li role=\"button\" tabIndex={0} onClick={() => navigate('/booking/history')}>Bookings</li>\r\n\r\n        <li ref={userRef} className={styles.avatarWrapper}>\r\n          <button\r\n            className={styles.avatarBtn}\r\n            onClick={() => setShowUserMenu((s) => !s)}\r\n            aria-haspopup=\"true\"\r\n            aria-expanded={showUserMenu}\r\n            aria-label=\"User menu\"\r\n          >\r\n            <div className={styles.avatarInitials} aria-hidden=\"true\">{initials}</div>\r\n          </button>\r\n          <HeaderDropdown items={userMenu} visible={showUserMenu} />\r\n        </li>\r\n      </ul>\r\n\r\n      <button className={styles.loginBtn} onClick={() => navigate('/login')}>Login</button>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}