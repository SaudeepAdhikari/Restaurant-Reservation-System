{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";function ProtectedRoute(_ref){let{children}=_ref;const[checking,setChecking]=useState(true);const[authed,setAuthed]=useState(false);useEffect(()=>{let mounted=true;const base=process.env.REACT_APP_API_BASE||'http://localhost:5000';fetch(\"\".concat(base,\"/api/customers/me\"),{credentials:'include'}).then(res=>{if(!mounted)return;if(!res.ok){setAuthed(false);}else{setAuthed(true);}}).catch(()=>{if(mounted)setAuthed(false);}).finally(()=>{if(mounted)setChecking(false);});return()=>{mounted=false;};},[]);if(checking)return null;// or a spinner\nreturn authed?children:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useState","Navigate","jsx","_jsx","ProtectedRoute","_ref","children","checking","setChecking","authed","setAuthed","mounted","base","process","env","REACT_APP_API_BASE","fetch","concat","credentials","then","res","ok","catch","finally","to"],"sources":["E:/Resturant/client/src/components/common/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nfunction ProtectedRoute({ children }) {\r\n  const [checking, setChecking] = useState(true);\r\n  const [authed, setAuthed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n    fetch(`${base}/api/customers/me`, { credentials: 'include' })\r\n      .then(res => {\r\n        if (!mounted) return;\r\n        if (!res.ok) {\r\n          setAuthed(false);\r\n        } else {\r\n          setAuthed(true);\r\n        }\r\n      })\r\n      .catch(() => { if (mounted) setAuthed(false); })\r\n      .finally(() => { if (mounted) setChecking(false); });\r\n\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  if (checking) return null; // or a spinner\r\n  return authed ? children : <Navigate to=\"/login\" />;\r\n}\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,QAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAClC,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACS,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CAE3CD,SAAS,CAAC,IAAM,CACd,GAAI,CAAAY,OAAO,CAAG,IAAI,CAClB,KAAM,CAAAC,IAAI,CAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAI,uBAAuB,CACtEC,KAAK,IAAAC,MAAA,CAAIL,IAAI,sBAAqB,CAAEM,WAAW,CAAE,SAAU,CAAC,CAAC,CAC1DC,IAAI,CAACC,GAAG,EAAI,CACX,GAAI,CAACT,OAAO,CAAE,OACd,GAAI,CAACS,GAAG,CAACC,EAAE,CAAE,CACXX,SAAS,CAAC,KAAK,CAAC,CAClB,CAAC,IAAM,CACLA,SAAS,CAAC,IAAI,CAAC,CACjB,CACF,CAAC,CAAC,CACDY,KAAK,CAAC,IAAM,CAAE,GAAIX,OAAO,CAAED,SAAS,CAAC,KAAK,CAAC,CAAE,CAAC,CAAC,CAC/Ca,OAAO,CAAC,IAAM,CAAE,GAAIZ,OAAO,CAAEH,WAAW,CAAC,KAAK,CAAC,CAAE,CAAC,CAAC,CAEtD,MAAO,IAAM,CAAEG,OAAO,CAAG,KAAK,CAAE,CAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIJ,QAAQ,CAAE,MAAO,KAAI,CAAE;AAC3B,MAAO,CAAAE,MAAM,CAAGH,QAAQ,cAAGH,IAAA,CAACF,QAAQ,EAACuB,EAAE,CAAC,QAAQ,CAAE,CAAC,CACrD,CAEA,cAAe,CAAApB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}