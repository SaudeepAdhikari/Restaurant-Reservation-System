{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nexport function useAuth() {\n  _s();\n  const [checking, setChecking] = useState(true);\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    let mounted = true;\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n    fetch(`${base}/api/customers/me`, {\n      credentials: 'include'\n    }).then(async res => {\n      if (!res.ok) throw new Error('Not authenticated');\n      return res.json();\n    }).then(data => {\n      if (!mounted) return;\n      setUser(data);\n    }).catch(() => {\n      if (!mounted) return;\n      setUser(null);\n    }).finally(() => {\n      if (mounted) setChecking(false);\n    });\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  return {\n    checking,\n    user\n  };\n}\n_s(useAuth, \"gSXPjA10Fp16o90/nFA2zQiloak=\");","map":{"version":3,"names":["useEffect","useState","useAuth","_s","checking","setChecking","user","setUser","mounted","base","process","env","REACT_APP_API_BASE","fetch","credentials","then","res","ok","Error","json","data","catch","finally"],"sources":["E:/Resturant/client/src/utils/auth.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\nexport function useAuth() {\r\n  const [checking, setChecking] = useState(true);\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const base = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n    fetch(`${base}/api/customers/me`, { credentials: 'include' })\r\n      .then(async res => {\r\n        if (!res.ok) throw new Error('Not authenticated');\r\n        return res.json();\r\n      }).then(data => {\r\n        if (!mounted) return;\r\n        setUser(data);\r\n      }).catch(() => {\r\n        if (!mounted) return;\r\n        setUser(null);\r\n      }).finally(() => { if (mounted) setChecking(false); });\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  return { checking, user };\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGJ,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACK,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd,IAAIQ,OAAO,GAAG,IAAI;IAClB,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,uBAAuB;IACtEC,KAAK,CAAC,GAAGJ,IAAI,mBAAmB,EAAE;MAAEK,WAAW,EAAE;IAAU,CAAC,CAAC,CAC1DC,IAAI,CAAC,MAAMC,GAAG,IAAI;MACjB,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;MACjD,OAAOF,GAAG,CAACG,IAAI,CAAC,CAAC;IACnB,CAAC,CAAC,CAACJ,IAAI,CAACK,IAAI,IAAI;MACd,IAAI,CAACZ,OAAO,EAAE;MACdD,OAAO,CAACa,IAAI,CAAC;IACf,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;MACb,IAAI,CAACb,OAAO,EAAE;MACdD,OAAO,CAAC,IAAI,CAAC;IACf,CAAC,CAAC,CAACe,OAAO,CAAC,MAAM;MAAE,IAAId,OAAO,EAAEH,WAAW,CAAC,KAAK,CAAC;IAAE,CAAC,CAAC;IACxD,OAAO,MAAM;MAAEG,OAAO,GAAG,KAAK;IAAE,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEJ,QAAQ;IAAEE;EAAK,CAAC;AAC3B;AAACH,EAAA,CAtBeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}