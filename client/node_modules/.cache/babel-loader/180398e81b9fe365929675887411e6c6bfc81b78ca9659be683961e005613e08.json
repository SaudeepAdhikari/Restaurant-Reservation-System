{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import'../styles/RestaurantDetail.css';import MenuSection from'../components/MenuSection';import BookingModal from'../components/BookingModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RestaurantDetail(){const{id}=useParams();const[restaurant,setRestaurant]=useState(null);const[tables,setTables]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{let mounted=true;setLoading(true);setError(null);const base=process.env.REACT_APP_API_BASE||process.env.REACT_APP_API_URL||'http://localhost:5000';// Fetch restaurant details\nfetch(\"\".concat(base,\"/api/restaurants/\").concat(id)).then(res=>{if(!res.ok)throw new Error(\"HTTP \".concat(res.status));return res.json();}).then(data=>{if(!mounted)return;setRestaurant(data);}).catch(err=>{console.error('Failed to fetch restaurant',err);if(mounted)setError(err.message||String(err));}).finally(()=>{if(mounted)setLoading(false);});// Fetch public tables for this restaurant\nfetch(\"\".concat(base,\"/api/tables/restaurant/\").concat(id)).then(res=>{if(!res.ok)throw new Error(\"HTTP \".concat(res.status));return res.json();}).then(list=>{if(!mounted)return;setTables(list||[]);}).catch(err=>{console.warn('Failed to fetch tables',err);if(mounted)setTables([]);});return()=>{mounted=false;};},[id]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-detail\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-detail\",children:[\"Failed to load restaurant: \",error]});if(!restaurant)return/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-detail\",children:\"Restaurant not found.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-detail\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"detail-image\",src:restaurant.image||'/assets/placeholder.jpg',alt:restaurant.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:restaurant.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating\",children:[\"\\u2B50 \",restaurant.rating||'—']}),/*#__PURE__*/_jsx(\"p\",{children:restaurant.description||restaurant.details||''}),restaurant.menu&&/*#__PURE__*/_jsx(MenuSection,{menu:restaurant.menu}),/*#__PURE__*/_jsxs(\"section\",{className:\"restaurant-tables\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Available tables\"}),tables.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No table information available.\"}),tables.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"table-list\",children:tables.map(t=>/*#__PURE__*/_jsxs(\"li\",{className:\"table-item \".concat(t.available?'available':'unavailable'),children:[/*#__PURE__*/_jsx(\"strong\",{children:t.name}),\" \\u2014 capacity: \",t.capacity,\" \",t.location?\"\\xB7 \".concat(t.location):'']},t._id))})]}),/*#__PURE__*/_jsx(BookingModal,{tables:tables})]})]});}export default RestaurantDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","MenuSection","BookingModal","jsx","_jsx","jsxs","_jsxs","RestaurantDetail","id","restaurant","setRestaurant","tables","setTables","loading","setLoading","error","setError","mounted","base","process","env","REACT_APP_API_BASE","REACT_APP_API_URL","fetch","concat","then","res","ok","Error","status","json","data","catch","err","console","message","String","finally","list","warn","className","children","src","image","alt","name","rating","description","details","menu","length","map","t","available","capacity","location","_id"],"sources":["E:/Resturant/client/src/pages/RestaurantDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport '../styles/RestaurantDetail.css';\r\nimport MenuSection from '../components/MenuSection';\r\nimport BookingModal from '../components/BookingModal';\r\n\r\nfunction RestaurantDetail() {\r\n  const { id } = useParams();\r\n  const [restaurant, setRestaurant] = useState(null);\r\n  const [tables, setTables] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    const base = process.env.REACT_APP_API_BASE || process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n    // Fetch restaurant details\r\n    fetch(`${base}/api/restaurants/${id}`)\r\n      .then(res => { if (!res.ok) throw new Error(`HTTP ${res.status}`); return res.json(); })\r\n      .then(data => { if (!mounted) return; setRestaurant(data); })\r\n      .catch(err => { console.error('Failed to fetch restaurant', err); if (mounted) setError(err.message || String(err)); })\r\n      .finally(() => { if (mounted) setLoading(false); });\r\n\r\n    // Fetch public tables for this restaurant\r\n    fetch(`${base}/api/tables/restaurant/${id}`)\r\n      .then(res => { if (!res.ok) throw new Error(`HTTP ${res.status}`); return res.json(); })\r\n      .then(list => { if (!mounted) return; setTables(list || []); })\r\n      .catch(err => { console.warn('Failed to fetch tables', err); if (mounted) setTables([]); });\r\n\r\n    return () => { mounted = false; };\r\n  }, [id]);\r\n\r\n  if (loading) return <div className=\"restaurant-detail\">Loading...</div>;\r\n  if (error) return <div className=\"restaurant-detail\">Failed to load restaurant: {error}</div>;\r\n  if (!restaurant) return <div className=\"restaurant-detail\">Restaurant not found.</div>;\r\n\r\n  return (\r\n    <div className=\"restaurant-detail\">\r\n      <img className=\"detail-image\" src={restaurant.image || '/assets/placeholder.jpg'} alt={restaurant.name} />\r\n      <div className=\"detail-info\">\r\n        <h2>{restaurant.name}</h2>\r\n        <div className=\"rating\">⭐ {restaurant.rating || '—'}</div>\r\n        <p>{restaurant.description || restaurant.details || ''}</p>\r\n        {restaurant.menu && <MenuSection menu={restaurant.menu} />}\r\n\r\n        <section className=\"restaurant-tables\">\r\n          <h3>Available tables</h3>\r\n          {tables.length === 0 && <p>No table information available.</p>}\r\n          {tables.length > 0 && (\r\n            <ul className=\"table-list\">\r\n              {tables.map(t => (\r\n                <li key={t._id} className={`table-item ${t.available ? 'available' : 'unavailable'}`}>\r\n                  <strong>{t.name}</strong> — capacity: {t.capacity} {t.location ? `· ${t.location}` : ''}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </section>\r\n\r\n        <BookingModal tables={tables} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RestaurantDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}